{% include "Header.php.twig" %}

namespace {{ skeletonModel.namespace }};

use {{ skeletonModel.entityClassName }};
use {{ skeletonModel.entityGatewayClassName }};
use {{ skeletonModel.deleteEntityUseCaseRequestClassName }};
use {{ skeletonModel.useCaseRequestClassName }};

class {{ skeletonModel.shortName }}
{
    /**
     * @var {{ skeletonModel.entityGatewayShortName }}
     */
    private ${{ skeletonModel.entityGatewayArgument }};

    public function __construct({{ skeletonModel.entityGatewayShortName }} $gateway)
    {
        $this->{{ skeletonModel.entityGatewayArgument }} = $gateway;
    }

    /**
     * @Transaction
     *
     * @param {{ skeletonModel.deleteEntityUseCaseRequestShortName }} $useCaseRequest
     *
     * @throws \{{ skeletonModel.entityNotFoundExceptionClassName }}
     */
public function execute(UseCaseRequest $useCaseRequest): void
{
${{ skeletonModel.entityArgument }} = $this->{{ skeletonModel.getEntityIdMethod }}($useCaseRequest->{{ skeletonModel.entityIdMethod }}());
$this->delete(${{ skeletonModel.entityArgument }});
}

private function {{ skeletonModel.getEntityIdMethod }}(int ${{ skeletonModel.entityIdArgument }}): {{ skeletonModel.entityShortName }}
{
return $this->{{ skeletonModel.entityGatewayArgument }}->findById(${{ skeletonModel.entityIdArgument }});
}

private function delete({{ skeletonModel.entityShortName }} ${{ skeletonModel.entityArgument }}): void
{
$this->{{ skeletonModel.entityGatewayArgument }}->delete(${{ skeletonModel.entityArgument }});
}
}
