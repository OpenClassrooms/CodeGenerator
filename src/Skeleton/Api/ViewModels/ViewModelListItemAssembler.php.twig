{% include "Header.php.twig" %}

namespace {{ skeletonModel.namespace }};

use OC\BusinessRules\Utils\DtoCommonFieldsHydrator;
use {{ skeletonModel.useCaseListItemResponseClassName }};
use {{ skeletonModel.useCaseResponseClassName }};

class {{ skeletonModel.shortName }}
{
    /**
     * @param {{ skeletonModel.useCaseListItemResponseShortName }}[] ${{ skeletonModel.useCaseListItemResponseArgument}}
     *
     * @return {{ skeletonModel.viewModelListItemShortName }}[]
     */
    public function createListItems(array ${{ skeletonModel.useCaseListItemResponseArgument}}): array
    {
        $vms = [];
        foreach (${{ skeletonModel.useCaseListItemResponseArgument }} as ${{ skeletonModel.useCaseResponseArgument}}) {
            $vms[] = $this->createListItem(${{ skeletonModel.useCaseResponseArgument}});
        }

        return $vms;
    }

    private function createListItem({{ skeletonModel.useCaseResponseShortName }} ${{ skeletonModel.useCaseResponseArgument}}): {{ skeletonModel.viewModelListItemShortName }}
    {
        $vm = new {{ skeletonModel.viewModelListItemShortName }}();
        DtoCommonFieldsHydrator::hydrate($vm, ${{ skeletonModel.useCaseResponseArgument}});

        return $vm;
    }
}
